#!/bin/bash




cd ./src/A2016
outputBase='../../chosen/'


for dir in `ls -d */`
do
  echo $dir
  for dir2 in `ls -d $dir*/`
  do
    echo "$dir2: Filecount: $(ls -1 $dir2 | wc -l)"
    prefix_dir=(`echo $dir2 | tr \/ -`)
    readarray -t -n 10 pathnames < <( find $dir2 -type f | shuf -n 10 )
    # readarray -t -d '' pathnames < <( find $dir2 -type f -print0 | shuf -z )
    for pathname in "${pathnames[@]}"
    do
      filenumber=(`echo $pathname | cut -c 10-30 | tr -cd '[[:digit:]]'`)
      outputFile="$outputBase$prefix_dir$filenumber.c"
      echo "Copying $pathname to $outputBase$prefix_dir$filenumber.c"
      cat $pathname > $outputFile
    done
  done
done